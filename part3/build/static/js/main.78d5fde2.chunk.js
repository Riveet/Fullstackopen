(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{24:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),u=n.n(c),s=(n(24),n(10)),o=n(2),i=n.n(o),b=n(5),d=n(4),j=n(0),f=function(e){var t=e.findPerson,n=e.search,r=e.setSearch;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsx)("label",{children:"filter shown with"}),Object(j.jsx)("input",{value:n,name:"search",onChange:function(e){r(e.target.value)}})]})},l=function(e){var t=e.addNote,n=e.newName,r=e.number,a=e.setNewName,c=e.setNumber,u=(e.persons,function(e){"name"===e.target.name&&a(e.target.value),"number"===e.target.name&&c(e.target.value)});return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsx)("h2",{children:"Add new:"}),Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:n,name:"name",onChange:u})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:r,name:"number",onChange:u})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var t=e.persons,n=e.search,r=e.searchVal,a=e.deletePerson;return Object(j.jsx)("div",{children:!n&&t?t.map((function(e){return Object(j.jsxs)("p",{children:[e.name," ",e.number," ",Object(j.jsx)("button",{onClick:function(){return a(e.id)},children:"delete"})]},e.id)})):r.map((function(e){return Object(j.jsxs)("p",{children:[e.name," ",e.number," ",Object(j.jsx)("button",{onClick:function(){return a(e.id)},children:"delete"})]},e.id)}))})},h=n(6),m=n.n(h),O="/api/persons",v=function(){var e=Object(b.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(O);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(O,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(b.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("".concat(O,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(b.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("".concat(O,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={getAll:v,create:x,update:w,deleteObj:g},k=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),u=Object(d.a)(c,2),o=u[0],h=u[1],m=Object(r.useState)(""),O=Object(d.a)(m,2),v=O[0],x=O[1],w=Object(r.useState)(""),g=Object(d.a)(w,2),k=g[0],S=g[1],N=Object(r.useState)([]),C=Object(d.a)(N,2),L=C[0],P=C[1],A=Object(r.useState)(!1),I=Object(d.a)(A,2),T=I[0],D=I[1],E=Object(r.useState)(!1),J=Object(d.a)(E,2),V=J[0],B=J[1],M=Object(r.useState)({type:"",msg:""}),W=Object(d.a)(M,2),q=W[0],z=W[1],F=function(){var e=Object(b.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.prev=1,e.next=4,y.getAll();case 4:t=e.sent,console.log(t),a(t),D(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),B(!0),D(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){F()}),[]);var G=function(){var e=Object(b.a)(i.a.mark((function e(t){var r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.deleteObj(t);case 2:r=n.filter((function(e){return e.id!==t})),c=n.find((function(e){return e.id===t})),a(r),z({type:"danger",msg:"Information of ".concat(c.name," deleted")}),setTimeout((function(){z(null)}),3e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return T?Object(j.jsx)("h1",{children:"Loading ..."}):V?Object(j.jsx)("h1",{children:"Something went wrong"}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),q?Object(j.jsx)("p",{className:"".concat(q.type),children:q.msg}):null,Object(j.jsx)(f,{findPerson:function(e){e.preventDefault();var t=n.filter((function(e){if(e.name.toLowerCase().startsWith(k.toLowerCase()))return e}));P(t)},search:k,setSearch:S}),Object(j.jsx)(l,{addNote:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toLowerCase()===o.toLowerCase()}));if(t){if(window.confirm("".concat(o," is already added to phonebook, replace the old number with a new one?"))){var r=Object(s.a)(Object(s.a)({},t),{},{number:v});y.update(t.id,r).then((function(e){a(n.map((function(n){return n.id!==t.id?n:e})))})).catch((function(e){return z({type:"danger",msg:"Information of ".concat(o," has already been removed from server")})}))}h(""),x(""),setTimeout((function(){z(null)}),3e3)}else{var c={name:o,number:v};y.create(c).then((function(e){return a(n.concat(e))})).then((function(e){return z({type:"success",msg:"Added ".concat(o)})})).catch((function(e){return z({type:"danger",msg:e.response.data.error})})),h(""),x(""),setTimeout((function(){z(null)}),3e3)}},newName:o,number:v,setNewName:h,setNumber:x,persons:n}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(p,{persons:n,search:k,searchVal:L,deletePerson:G})]})};u.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.78d5fde2.chunk.js.map