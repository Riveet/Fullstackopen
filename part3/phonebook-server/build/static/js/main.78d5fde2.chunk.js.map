{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services.js","App.js","index.js"],"names":["Filter","findPerson","search","setSearch","onSubmit","value","name","onChange","e","target","PersonForm","addNote","newName","number","setNewName","setNumber","handleChange","persons","type","Persons","searchVal","deletePerson","map","person","onClick","id","url","getAll","a","axios","get","request","data","create","newObj","post","update","put","deleteObj","delete","App","useState","setPersons","setSearchVal","loading","setLoading","error","setError","msg","notification","setNotification","fetchData","services","console","log","useEffect","filter","find","p","setTimeout","className","preventDefault","searchPerson","toLowerCase","startsWith","existingPerson","window","confirm","changedNumber","then","catch","err","newPerson","concat","result","response","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.78d5fde2.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ findPerson, search, setSearch }) => {\r\n  const handleChange = (e) => {\r\n    setSearch(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={findPerson}>\r\n      <label>filter shown with</label>\r\n      <input value={search} name='search' onChange={handleChange} />\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nconst PersonForm = ({\r\n  addNote,\r\n  newName,\r\n  number,\r\n  setNewName,\r\n  setNumber,\r\n  persons,\r\n}) => {\r\n  const handleChange = (e) => {\r\n    if (e.target.name === 'name') {\r\n      setNewName(e.target.value)\r\n    }\r\n    if (e.target.name === 'number') {\r\n      setNumber(e.target.value)\r\n    }\r\n  }\r\n  return (\r\n    <form onSubmit={addNote}>\r\n      <h2>Add new:</h2>\r\n      <div>\r\n        name: <input value={newName} name='name' onChange={handleChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={number} name='number' onChange={handleChange} />\r\n      </div>\r\n      <div>\r\n        <button type='submit'>add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import React from 'react'\r\n\r\nconst Persons = ({ persons, search, searchVal, deletePerson }) => {\r\n  return (\r\n    <div>\r\n      {!search && persons\r\n        ? persons.map((person) => {\r\n            return (\r\n              <p key={person.id}>\r\n                {/* {person.name.charAt(0).toUpperCase() + person.name.slice(1)}{' '} */}\r\n                {person.name} {person.number}{' '}\r\n                <button onClick={() => deletePerson(person.id)}>delete</button>\r\n              </p>\r\n            )\r\n          })\r\n        : searchVal.map((person) => {\r\n            return (\r\n              <p key={person.id}>\r\n                {/* {person.name.charAt(0).toUpperCase() + person.name.slice(1)}{' '} */}\r\n                {person.name} {person.number}{' '}\r\n                <button onClick={() => deletePerson(person.id)}>delete</button>\r\n              </p>\r\n            )\r\n          })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Persons\r\n","import axios from 'axios'\r\nconst url = '/api/persons'\r\n\r\nconst getAll = async () => {\r\n  const request = await axios.get(url)\r\n  return request.data\r\n}\r\n\r\nconst create = async (newObj) => {\r\n  const request = await axios.post(url, newObj)\r\n  return request.data\r\n}\r\n\r\nconst update = async (id, newObj) => {\r\n  const request = await axios.put(`${url}/${id}`, newObj)\r\n  return request.data\r\n}\r\n\r\nconst deleteObj = async (id) => {\r\n  const request = await axios.delete(`${url}/${id}`)\r\n  return request\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  deleteObj,\r\n}\r\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport services from './services'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [number, setNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [searchVal, setSearchVal] = useState([])\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [notification, setNotification] = useState({ type: '', msg: '' })\n\n  const fetchData = async () => {\n    setLoading(true)\n    try {\n      const data = await services.getAll()\n      console.log(data)\n      setPersons(data)\n      setLoading(false)\n    } catch (error) {\n      setError(true)\n      setLoading(false)\n    }\n  }\n\n  useEffect(() => {\n    fetchData()\n  }, [])\n\n  const addNote = (e) => {\n    e.preventDefault()\n\n    const existingPerson = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\n    )\n\n    if (!existingPerson) {\n      const newPerson = {\n        name: newName,\n        number,\n      }\n\n      services\n        .create(newPerson)\n        .then((data) => setPersons(persons.concat(data)))\n        .then((result) =>\n          setNotification({ type: 'success', msg: `Added ${newName}` })\n        )\n        .catch((error) =>\n          setNotification({ type: 'danger', msg: error.response.data.error })\n        )\n      setNewName('')\n      setNumber('')\n      // setNotification({ type: 'success', msg: `Added ${newName}` })\n      setTimeout(() => {\n        setNotification(null)\n      }, 3000)\n    } else {\n      const updateNumber = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      )\n\n      if (updateNumber) {\n        const changedNumber = { ...existingPerson, number }\n        services\n          .update(existingPerson.id, changedNumber)\n          .then((data) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== existingPerson.id ? person : data\n              )\n            )\n          })\n          .catch((err) =>\n            setNotification({\n              type: 'danger',\n              msg: `Information of ${newName} has already been removed from server`,\n            })\n          )\n      }\n\n      setNewName('')\n      setNumber('')\n      // setNotification({ type: 'success', msg: `${newName} number edited` })\n      setTimeout(() => {\n        setNotification(null)\n      }, 3000)\n    }\n  }\n\n  const findPerson = (e) => {\n    e.preventDefault()\n    const searchPerson = persons.filter((person) => {\n      const personName = person.name.toLowerCase()\n      if (personName.startsWith(search.toLowerCase())) {\n        return person\n      }\n    })\n    setSearchVal(searchPerson)\n  }\n\n  const deletePerson = async (id) => {\n    await services.deleteObj(id)\n    const data = persons.filter((person) => person.id !== id)\n    const person = persons.find((p) => p.id === id)\n    setPersons(data)\n    setNotification({\n      type: 'danger',\n      msg: `Information of ${person.name} deleted`,\n    })\n    setTimeout(() => {\n      setNotification(null)\n    }, 3000)\n  }\n\n  if (loading) {\n    return <h1>Loading ...</h1>\n  }\n\n  if (error) {\n    return <h1>Something went wrong</h1>\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {notification ? (\n        <p className={`${notification.type}`}>{notification.msg}</p>\n      ) : null}\n      <Filter findPerson={findPerson} search={search} setSearch={setSearch} />\n\n      <PersonForm\n        addNote={addNote}\n        newName={newName}\n        number={number}\n        setNewName={setNewName}\n        setNumber={setNumber}\n        persons={persons}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons\n        persons={persons}\n        search={search}\n        searchVal={searchVal}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}